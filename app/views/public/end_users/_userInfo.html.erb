<div class='user-info'>
    <div class='user-info-profile-image'>
        <%= image_tag @user.get_profile_image,class:'show-profile-image' %>
    </div>
    <div class='user-info-user-name'>
        <span class='show-user-name'><%= @user.name %></span><br />
        
        <div class='user-info-follow-setting-wrapper'>
            <div class='user-info-follow'>
                <% if @user === current_end_user %>
                    <%= link_to 'プロフィールを編集',edit_end_user_path(@user),class:'user-setting' %>
                <% else %>
                    <% if @user.followed_by?(current_end_user) %>
                        <%= link_to'フォロー中',end_user_relationships_path(@user),method: :delete,class:'user-followed-show' %>
                    <% else %>
                        <% unless @user == current_end_user %>
                            <%= link_to 'フォローする',end_user_relationships_path(@user),method: :post,class:'user-following-show' %>
                        <% end %>
                    <% end %>
                <% end %>
            </div>

            <div class='user-info-message'>
                <% if @user === current_end_user %>
                    <span class='users-show-logout-button'><i class="fa-solid fa-gear"></i></span>
                <% else %>
                    <% unless @user.id == current_end_user.id %>    
                        <% if @haveRoom == true %>    
                            <%= link_to "メッセージ",room_path(@roomId),class:'make-room' %>
                        <% else %>
                            <%= form_with model: @room,local: true do |f|%>   
                                <%= fields_for @RoomUser do |r| %>  
                                    <%= r.hidden_field :end_user_id, value: @user.id %>  
                                <% end %>
                                <%= f.submit "メッセージ",class:'make-room' %>
                            <% end %>
                        <% end %>
                    <% end %>
                <% end %>
            </div>
        </div>
    </div>           
</div>

<div class='users-info-wrapper'>
    <%= render 'year',user:@user,number2:@number2,number4:@number4,number5:@number5 %>
    <ul class='users-info'>
        <% unless @user.year === '' %>
            <li class='li-user-year'><%= @user.year %></li>
        <% end %>
        <li class='li-user-dep'><%= @user.dep %></li>
        <li class='li-user-cor'><%= @user.cor %></li>
    </ul>
    <span class='user-introduction'><%= simple_format(@user.introduction) %></span>
</div> 




<% #モーダル %>

<div class='index-modal-bg'></div>

<div class='index-modal'>
    <div class='modal-content'>
        <% if @user === current_end_user %>
            <div class='modal-logout'>
                <%= link_to 'ログアウト',destroy_end_user_session_path,method: :delete,class:'logout-button-font' %>
            </div>
        <% else %>
            <div class='block-user'>
                ブロック
            </div>
            <div class='report-user'>
                報告する
            </div>
        <% end %>
        <div class='index-modal-close-button'>キャンセル</div>
    </div>
</div>



<script>
    $('.users-show-logout-button')
    .on('click',function(){
        $('.index-modal').fadeIn(200);
        $('.index-modal-bg').fadeIn(200);
        $("body").addClass("no_scroll");
    });
    $('.index-modal-bg,.index-modal-close-button')
    .on('click',function(){
        $("body").removeClass("no_scroll");
        $('.index-modal,.index-modal-bg').fadeOut(400);
    });
</script>