<div class='flash-message'>
    <% if flash[:notice] %>
        <div class='alert alert-secondary'>
            <%= flash[:notice] %>
        </div>
    <% end %>
</div>

<div class='container'>
    <div class='col-md-10 users-show'>
        <div class='users-show-top'>
            <%= render 'userInfo' %>
        </div>
            
        <div class='count-follower-following'>
            <span class='follower-page-kakomon-count'>
                <%= link_to user_path(@user),class:'user-show-top-show' do %>
                    過去問<%= @user.kakomons.count %>件
                <% end %>
            </span>
            <span class='follower-page-class-count'>
                <%= link_to "/users/#{@user.id}/boards",class:'user-show-top' do %>
                    講義評価<%= @user.boards.count %>件
                <% end %>
            </span>
            <span class='span-following'><%= link_to 'フォロー中',followings_user_path,class:'user-show-top-show' %></span>
            <span class='span-follower'><%= link_to 'フォロワー',followers_user_path,class:'user-show-top-show' %></span>
        </div>

        <% i = 0 %>
        <% len = @boards.length %>

        <% if @user.boards.count === 0 %>
            <span class='no-follower'>投稿はありません</span>
        <% else %>
            <div class='col-md-10 kakomon-index'>
                <% while i < len do %>
                    <% @boards.each do |board| %>
                    <div class='show-board-content'>
                        <div class='article-bottom'>
                            講義 : <%= board.sub %><br>
                            教授 : <%= board.prof %><br>
                            <span class='user-form1'>講義の面白さ</span><span class='star-rate1' id="star-rate1-<%= board.id %>"></span><br />
                            <span class='user-form2'>教授の人柄</span><span class='star-rate2' id="star-rate2-<%= board.id %>"></span><br />
                            <span class='user-form3'>単位の取りやすさ</span><span class='star-rate3' id="star-rate3-<%= board.id %>"></span><br />
                            <span class='board-comment'><%= board.comment[0..19] %>...</span><span class='continue-comment-link'><%= link_to '続きを読む',board_path(board),class:'continue-comment-link' %><br /></span></span>
                            <span class='board-comment-1200'><%= board.comment[0..15] %>...</span><span class='continue-comment-link-1200'><%= link_to '続きを読む',board_path(board),class:'continue-comment-link-1200' %><br /></span></span>
                            <span class='board-comment-1000'><%= board.comment[0..15] %>...</span><span id='<%= i %>-1000' class='continue-comment-link-1000'>続きを読む<br /></span></span>
                            <span class='board-comment-460'><%= board.comment[0..17] %>...</span><span id='<%= i %>-460' class='continue-comment-link-460'>続きを読む<br /></span></span>
                            <span class='board-comment-all'><%= board.comment %><br /></span>
                            <span class='board-date'><%= board.created_at.strftime('%Y/%m/%d') %>
                        </div>
                    </div>
                
                    <script>
                        $('#star-rate1-<%= board.id %>').raty({
                        size: 36,
                        starOff:  '<%= asset_path('star-off.png') %>',
                        starOn : '<%= asset_path('star-on.png') %>',
                        readOnly: true,
                        score: <%= board.rate1 %>
                        });
                    </script>
                    <script>
                        $('#star-rate2-<%= board.id %>').raty({
                        size: 36,
                        starOff:  '<%= asset_path('star-off.png') %>',
                        starOn : '<%= asset_path('star-on.png') %>',
                        readOnly: true,
                        score: <%= board.rate2 %>
                        });
                    </script>
                    <script>
                        $('#star-rate3-<%= board.id %>').raty({
                        size: 36,
                        starOff:  '<%= asset_path('star-off.png') %>',
                        starOn : '<%= asset_path('star-on.png') %>',
                        readOnly: true,
                        score: <%= board.rate3 %>
                        });
                    </script>
                    <script>
                        $('#<%= i %>-1000')
                            .on('click',function(){
                                var continue1000Str = '<%= i %>';
                                var continue1000Ind = Number(continue1000Str);
                                $('.board-comment-all').eq(continue1000Ind).css('display','inline');
                                $('.board-comment-1000').eq(continue1000Ind).css('display','none');
                                $('.continue-comment-link-1000').eq(continue1000Ind).css('display','none');
                            });
                    
                        $('#<%= i %>-460')
                            .on('click',function(){
                                var continue460Str = '<%= i %>';
                                var continue460Ind = Number(continue460Str);
                                $('.board-comment-all').eq(continue460Ind).css('display','inline');
                                $('.board-comment-460').eq(continue460Ind).css('display','none');
                                $('.continue-comment-link-460').eq(continue460Ind).css('display','none');
                            });
                    </script>
                
                    <% i += 1 %>
                    <% end %>
                <% end %>
            </div>
        <% end %>
    </div>
</div>